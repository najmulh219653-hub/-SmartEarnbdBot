# EarnQuick Bot - Telegram Mini App Backend

ржПржЯрж┐ EarnQuick Telegram Mini App-ржПрж░ Node.js ржПржмржВ Express ржнрж┐рждрзНрждрж┐ржХ ржмрзНржпрж╛ржХржПржирзНржб рж╕рж╛рж░рзНржнрж┐рж╕ред ржПржЯрж┐ ржЯрзЗрж▓рж┐ржЧрзНрж░рж╛ржо ржмржЯ (Telegraf) ржПржмржВ PostgreSQL (Render/Neon) ржбрзЗржЯрж╛ржмрзЗрж╕ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЗржЙржЬрж╛рж░ рж░рзЗржЬрж┐рж╕рзНржЯрзНрж░рзЗрж╢ржи, рж░рзЗржлрж╛рж░рзЗрж▓ ржПржмржВ ржкржпрж╝рзЗржирзНржЯ ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯрзЗрж░ ржХрж╛ржЬ ржХрж░рзЗред

## ЁЯЪА ржлрж┐ржЪрж╛рж░рж╕ржорзВрж╣ (Features)

* **Telegram Webhook:** Render-ржП Webhook-ржПрж░ ржорж╛ржзрзНржпржорзЗ ржЯрзЗрж▓рж┐ржЧрзНрж░рж╛ржо ржЖржкржбрзЗржЯ рж░рж┐рж╕рж┐ржн ржХрж░рж╛ред
* **User Management:** PostgreSQL-ржП ржЗржЙржЬрж╛рж░ ржбрзЗржЯрж╛ рж╕ржВрж░ржХрзНрж╖ржг, ржкрзЯрзЗржирзНржЯ ржЯрзНрж░рзНржпрж╛ржХрж┐ржВред
* **Referral System:** `/start r_code` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЗржЙржЬрж╛рж░ рж░рзЗржлрж╛рж░рзЗрж▓ ржЯрзНрж░рзНржпрж╛ржХрж┐ржВ ржУ ржЗржирж╕рзНржЯрзНржпрж╛ржирзНржЯ ржмрзЛржирж╛рж╕ ржкрзНрж░ржжрж╛ржиред
* **Monetag Callback API:** ржоржирж┐ржЯрзЗржЧ S2S (Server-to-Server) ржХрж▓ржмрзНржпрж╛ржХ рж░рж┐рж╕рж┐ржн ржХрж░рж╛ ржПржмржВ ржЗржЙржЬрж╛рж░ржжрзЗрж░ ржЕрзНржпрж╛ржХрж╛ржЙржирзНржЯрзЗ ржкржпрж╝рзЗржирзНржЯ ржпрзЛржЧ ржХрж░рж╛ред
* **Secure Withdraw API:** ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж╕ржоржпрж╝ ржУ рж▓рж┐ржорж┐ржЯ ржорзЗржирзЗ ржЙржЗржержбрзНрж░ рж░рж┐ржХрзЛржпрж╝рзЗрж╕рзНржЯ рж╣рзНржпрж╛ржирзНржбрзЗрж▓ ржХрж░рж╛ред

## тЪЩя╕П ржкрзНрж░ржЬрзЗржХрзНржЯ рж╕рзЗржЯржЖржк (Local Setup)

рж▓рзЛржХрж╛рж▓ ржХржорзНржкрж┐ржЙржЯрж╛рж░рзЗ ржкрзНрж░ржЬрзЗржХрзНржЯржЯрж┐ ржЪрж╛рж▓рзБ ржХрж░рж╛рж░ ржЬржирзНржп ржирж┐ржЪрзЗрж░ ржзрж╛ржкржЧрзБрж▓рж┐ ржЕржирзБрж╕рж░ржг ржХрж░рзБржи:

рзз.  **ржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝рждрж╛:** Node.js, PostgreSQL/Neon ржЗржирж╕рзНржЯрж▓ ржХрж░рзБржиред
рзи.  **ржирж┐рж░рзНржнрж░рждрж╛ ржЗржирж╕рзНржЯрж▓:**
    ```bash
    npm install
    ```
рзй.  **ржПржиржнрж╛ржпрж╝рж░ржиржорзЗржирзНржЯ ржнрзНржпрж╛рж░рж┐ржпрж╝рзЗржмрж▓ рж╕рзЗржЯржЖржк:** `.env` ржирж╛ржорзЗ ржПржХржЯрж┐ ржлрж╛ржЗрж▓ рждрзИрж░рж┐ ржХрж░рзБржи (ржпрж╛ `.gitignore`-ржП ржЖржЫрзЗ) ржПржмржВ ржирж┐ржЪрзЗрж░ ржнрзНржпрж╛рж░рж┐ржпрж╝рзЗржмрж▓ржЧрзБрж▓рж┐ ржпрзЛржЧ ржХрж░рзБржи:

    ```env
    PORT=3000
    BOT_TOKEN=YOUR_TELEGRAM_BOT_TOKEN
    DATABASE_URL=postgres://user:password@host:port/dbname
    ADMIN_ID=8145444675
    MINI_APP_URL=http://localhost:8080/ (ржЕржержмрж╛ ржЖржкржирж╛рж░ ржлрзНрж░ржирзНржЯржПржирзНржб URL)
    ```

рзк.  **ржбрзЗржЯрж╛ржмрзЗрж╕ ржорж╛ржЗржЧрзНрж░рзЗрж╢ржи:** `users`, `ad_view_logs`, ржПржмржВ `withdraw_requests` ржЯрзЗржмрж┐рж▓ржЧрзБрж▓рж┐ рждрзИрж░рж┐ ржХрж░рзБржи (SQL рж╕рзНржХрзНрж░рж┐ржкрзНржЯ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ)ред
рзл.  **рж╕рж╛рж░рзНржнрж╛рж░ ржЪрж╛рж▓рзБ:**
    ```bash
    npm start
    ```

## ЁЯМР ржбрж┐ржкрзНрж▓ржпрж╝ржорзЗржирзНржЯ (Deployment)

ржПржЗ ржкрзНрж░ржЬрзЗржХрзНржЯржЯрж┐ Render ржкрзНрж▓рзНржпрж╛ржЯржлрж░рзНржорзЗ ржбрж┐ржкрзНрж▓ржпрж╝ ржХрж░рж╛рж░ ржЬржирзНржп рждрзИрж░рж┐ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред

1.  **Render Web Service:** ржЖржкржирж╛рж░ GitHub рж░рж┐ржкрзЛржЬрж┐ржЯрж░рж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржПржХржЯрж┐ Node.js **Web Service** рждрзИрж░рж┐ ржХрж░рзБржиред
2.  **Render PostgreSQL:** ржПржХржЯрж┐ PostgreSQL ржбрзЗржЯрж╛ржмрзЗрж╕ рждрзИрж░рж┐ ржХрж░рзБржи ржПржмржВ ржПрж░ **Internal Connection URL** ржЯрж┐ `DATABASE_URL` ржнрзНржпрж╛рж░рж┐ржпрж╝рзЗржмрж▓ рж╣рж┐рж╕рзЗржмрзЗ Web Service-ржП ржпрзБржХрзНржд ржХрж░рзБржиред
3.  **Webhook рж╕рзЗржЯ:** ржбрж┐ржкрзНрж▓ржпрж╝ржорзЗржирзНржЯрзЗрж░ ржкрж░ Render рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ржнрж╛ржмрзЗ Webhook рж╕рзЗржЯ ржХрж░ржмрзЗред

## ЁЯФЧ ржПржирзНржбржкржпрж╝рзЗржирзНржЯрж╕ (API Endpoints)

ржПржЗ ржмрзНржпрж╛ржХржПржирзНржбрзЗ ржмрзНржпржмрж╣рзГржд ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг API рж░рзБржЯржЧрзБрж▓рж┐:

| ржорзЗржержб | рж░рзБржЯ | ржмрж┐ржмрж░ржг |
| :--- | :--- | :--- |
| `POST` | `/api/monetag-callback` | ржоржирж┐ржЯрзЗржЧ ржерзЗржХрзЗ ржЕрзНржпрж╛ржб ржнрж┐ржЙржпрж╝рзЗрж░ ржбрзЗржЯрж╛ рж░рж┐рж╕рж┐ржн ржХрж░рж╛рж░ ржЬржирзНржп S2S ржХрж▓ржмрзНржпрж╛ржХ рж░рзБржЯред |
| `POST` | `/api/withdraw` | Telegram Mini App ржерзЗржХрзЗ ржЙржЗржержбрзНрж░ рж░рж┐ржХрзЛржпрж╝рзЗрж╕рзНржЯ ржЬржорж╛ ржирзЗржУржпрж╝рж╛рж░ ржЬржирзНржп рж░рзБржЯред |
| `GET` | `/` | рж╕рж╛рж░рзНржнрж╛рж░ рж╣рзЗрж▓рже ржЪрзЗржХ (рж╕рж╛рж░рзНржнрж╛рж░ ржЪрж╛рж▓рзБ ржЖржЫрзЗ ржХрж┐ржирж╛ рждрж╛ ржжрзЗржЦрж╛ржпрж╝)ред |

## ЁЯСе ржЕржмржжрж╛ржи (Contribution)

ржпржжрж┐ ржЖржкржирж┐ ржПржЗ ржкрзНрж░ржЬрзЗржХрзНржЯрзЗ ржХрзЛржирзЛ ржЕржмржжрж╛ржи рж░рж╛ржЦрждрзЗ ржЪрж╛ржи, рждрж╛рж╣рж▓рзЗ ржПржХржЯрж┐ Pull Request рждрзИрж░рж┐ ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред

---

**ржмрж┐ржХрж╛рж╢ржХрж╛рж░рзА:** [ржирж╛ржЬржорзБрж▓ рж╣ржХ ржлрж░рж╣рж╛ржж]
