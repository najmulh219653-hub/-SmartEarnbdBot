<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>EarnQuick Official Mini App</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <!-- ‡ßß. Monetag ‡¶á‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡¶∏‡ßç‡¶ü‡¶ø‡¶∂‡¶ø‡¶Ø‡¶º‡¶æ‡¶≤ SDK ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ (‡¶¨‡¶æ‡¶ü‡¶® ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø) -->
    <!-- ‡¶è‡¶ü‡¶ø ‡¶ó‡ßç‡¶≤‡ßã‡¶¨‡¶æ‡¶≤‡¶ø show_10070523 ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®‡¶ü‡¶ø ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶¨‡ßá -->
    <script src='//libtl.com/sdk.js' data-zone='10070523' data-sdk='show_10070523'></script>
    
    <style>
        /* --- ‡¶¨‡ßá‡¶∏‡¶ø‡¶ï ‡¶ì ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶•‡¶ø‡¶Æ ‡¶á‡¶®‡ßç‡¶ü‡¶ø‡¶ó‡ßç‡¶∞‡ßá‡¶∂‡¶® CSS --- */
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; 
            text-align: center; 
            margin: 0; 
            padding: 0; 
            background: var(--tg-theme-bg-color, #f4f4f4); 
            color: var(--tg-theme-text-color, #000000); 
            padding-bottom: 70px; 
        }
        .container {
            padding: 15px;
            max-width: 600px;
            margin: 0 auto;
        }
        h1 {
            color: var(--tg-theme-text-color, #333);
            font-size: 1.5rem;
            margin: 10px 0;
        }

        /* --- ‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶∏‡ßç‡¶≤‡¶ü ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ (‡¶¨‡ßç‡¶Ø‡¶æ‡¶®‡¶æ‡¶∞) --- */
        .ad-slot {
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            width: 100%;
            z-index: 10;
        }
        
        /* ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡ßá‡¶∞ ‡¶∞‡ßá‡¶∏‡¶™‡¶®‡¶∏‡¶ø‡¶≠‡¶®‡ßá‡¶∏ ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø */
        .ad-slot > div, .ad-slot iframe {
            max-width: 100% !important;
            height: auto !important;
        }

        .top-ad {
            margin-bottom: 15px;
            position: sticky;
            top: 0;
            background-color: var(--tg-theme-secondary-bg-color);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            min-height: 50px; /* ‡¶Ø‡¶æ‡¶§‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶≤‡ßã‡¶° ‡¶π‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶Ü‡¶ó‡ßá ‡¶ú‡¶æ‡ßü‡¶ó‡¶æ ‡¶•‡¶æ‡¶ï‡ßá */
        }
        .bottom-ad {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: var(--tg-theme-secondary-bg-color);
            box-shadow: 0 -2px 4px rgba(0, 0, 0, 0.1);
            min-height: 50px;
        }

        /* --- ‡¶ö‡¶≤‡¶Æ‡¶æ‡¶® ‡¶π‡ßá‡¶°‡¶≤‡¶æ‡¶á‡¶® ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ --- */
        .headline-bar {
            background-color: #38c172; 
            color: white;
            padding: 8px 0;
            margin-bottom: 20px;
            overflow: hidden;
            white-space: nowrap;
        }
        .marquee {
            display: inline-block;
            padding-left: 100%;
            animation: scroll 20s linear infinite;
        }
        @keyframes scroll {
            0% { transform: translate(0, 0); }
            100% { transform: translate(-100%, 0); }
        }

        /* --- ‡¶¨‡¶æ‡¶ü‡¶® ‡¶ì ‡¶´‡¶∞‡ßç‡¶Æ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ --- */
        #adButton {
            background-color: var(--tg-theme-button-color, #007bff);
            color: var(--tg-theme-button-text-color, white);
            border: none;
            padding: 15px 30px;
            font-size: 1.1rem;
            border-radius: 8px;
            cursor: pointer;
            width: 90%;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: background-color 0.2s;
        }
        #withdrawForm {
            background-color: var(--tg-theme-secondary-bg-color, #fff);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            text-align: left;
        }
        #withdrawForm label {
            display: block;
            margin-top: 10px;
            font-weight: 500;
        }
        #withdrawForm input, #withdrawForm button {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            border: 1px solid var(--tg-theme-hint-color, #ccc);
            border-radius: 5px;
            box-sizing: border-box;
        }
        #withdrawForm button {
            background-color: var(--tg-theme-link-color, #00bfff);
            color: white;
            cursor: pointer;
            margin-top: 15px;
        }
        #message {
            margin-top: 10px;
            font-weight: bold;
            text-align: center;
        }
    </style>
</head>
<body>
    
    <!-- ‡¶ü‡¶™ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶∏‡ßç‡¶≤‡¶ü: ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶®‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶ï‡ßã‡¶° -->
    <div class="ad-slot top-ad" id="topAdSlot">
        <!-- ‡ß®. ‡¶¨‡ßç‡¶Ø‡¶æ‡¶®‡¶æ‡¶∞ ‡¶ï‡ßã‡¶° ‡¶á‡¶®‡¶∏‡¶æ‡¶∞‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá -->
        <script type="text/javascript"> 	atOptions = { 		'key' : '00605022df81b880d400151bfc7c2185', 		'format' : 'iframe', 		'height' : 90, 		'width' : 728, 		'params' : {} 	}; </script> <script type="text/javascript" src="//enabledetective.com/00605022df81b880d400151bfc7c2185/invoke.js"></script>
    </div>

    <div class="headline-bar">
        <div class="marquee">
            üì£ ‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞ ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶∏‡¶ï‡¶æ‡¶≤ ‡ß¨‡¶ü‡¶æ ‡¶•‡ßá‡¶ï‡ßá ‡¶∞‡¶æ‡¶§ ‡ßÆ‡¶ü‡¶æ ‡¶™‡¶∞‡ßç‡¶Ø‡¶®‡ßç‡¶§ | ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó: ‡ß¶‡ßß‡ßØ‡ßß‡ß©‡ß¨‡ß®‡ßß‡ß´‡ßß‡ß¶ | ‡¶á‡¶Æ‡ßá‡¶á‡¶≤: najmulh219653@gmail.com üì£
        </div>
    </div>

    <div class="container">
        <h1>‡¶Æ‡ßã‡¶ü ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü: <span id="userPoints">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</span></h1>

        <!-- ‡¶è‡¶á ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡¶≤‡ßá Monetag ‡¶á‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡¶∏‡ßç‡¶ü‡¶ø‡¶∂‡¶ø‡¶Ø‡¶º‡¶æ‡¶≤ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá ‡¶è‡¶¨‡¶Ç ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶¨‡ßá -->
        <button id="adButton">
            üëÅÔ∏è ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶® ‡¶ì ‡ß´ ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶Ü‡ßü ‡¶ï‡¶∞‡ßÅ‡¶®
        </button>
        <p id="adStatus" style="color:var(--tg-theme-hint-color);">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶¶‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§...</p>


        <h2>‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®</h2>
        <form id="withdrawForm">
            <label for="points">‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞ ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü (10,000 - 100,000):</label>
            <input type="number" id="points" name="points" required min="10000" max="100000" placeholder="‡¶®‡ßç‡¶Ø‡ßÇ‡¶®‡¶§‡¶Æ 10000 ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü">
            
            <label for="paymentAddress">‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ (Bkash/Nagad):</label>
            <input type="text" id="paymentAddress" name="paymentAddress" required placeholder="01XXXXXXXXX">

            <button type="submit">‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞ ‡¶∞‡¶ø‡¶ï‡ßã‡¶Ø‡¶º‡ßá‡¶∏‡ßç‡¶ü ‡¶™‡¶æ‡¶†‡¶æ‡¶®</button>
            <div id="message"></div>
        </form>

    </div>

    <!-- ‡¶¨‡¶ü‡¶Æ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶∏‡ßç‡¶≤‡¶ü: ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶®‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶ï‡ßã‡¶° -->
    <div class="ad-slot bottom-ad" id="bottomAdSlot">
        <!-- ‡ß©. ‡¶¨‡ßç‡¶Ø‡¶æ‡¶®‡¶æ‡¶∞ ‡¶ï‡ßã‡¶° ‡¶á‡¶®‡¶∏‡¶æ‡¶∞‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá -->
        <script type="text/javascript"> 	atOptions = { 		'key' : '00605022df81b880d400151bfc7c2185', 		'format' : 'iframe', 		'height' : 90, 		'width' : 728, 		'params' : {} 	}; </script> <script type="text/javascript" src="//enabledetective.com/00605022df81b880d400151bfc7c2185/invoke.js"></script>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        // !!! ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ Render ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞‡ßá‡¶∞ API ‡¶è‡¶∞ ‡¶¨‡ßá‡¶∏ URL ‡¶¨‡¶∏‡¶æ‡¶® !!!
        const RENDER_API_BASE_URL = "‡¶Ü‡¶™‡¶®‡¶æ‡¶∞_RENDER_API_URL_‡¶è‡¶ñ‡¶æ‡¶®‡ßá_‡¶¨‡¶∏‡¶¨‡ßá/api"; 
        const MONETAG_SECRET_KEY = "YOUR_MONETAG_SECRET_KEY"; // ‡¶Ö‡¶¨‡¶∂‡ßç‡¶Ø‡¶á ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ü‡¶∏‡¶≤ ‡¶∏‡¶ø‡¶ï‡ßç‡¶∞‡ßá‡¶ü ‡¶ï‡ßÄ ‡¶¨‡¶∏‡¶æ‡¶®
        
        // Monetag SDK ‡¶•‡ßá‡¶ï‡ßá ‡¶™‡ßç‡¶∞‡¶æ‡¶™‡ßç‡¶§ ‡¶ó‡ßç‡¶≤‡ßã‡¶¨‡¶æ‡¶≤ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        // ‡¶è‡¶ü‡¶ø data-sdk='show_10070523' ‡¶è‡¶∞ ‡¶Æ‡¶æ‡¶ß‡ßç‡¶Ø‡¶Æ‡ßá ‡¶≤‡ßã‡¶° ‡¶π‡ßü
        const showMonetagAd = typeof show_10070523 === 'function' ? show_10070523 : null;

        tg.ready();
        
        const adButton = document.getElementById('adButton');
        const userPointsSpan = document.getElementById('userPoints');
        const withdrawForm = document.getElementById('withdrawForm');
        const messageDiv = document.getElementById('message');
        const adStatusDiv = document.getElementById('adStatus');
        let currentUserId = null;

        function generateTransactionId() {
            // Monetag S2S ‡¶è‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶á‡¶â‡¶®‡¶ø‡¶ï ‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡¶ú‡ßá‡¶ï‡¶∂‡¶® ‡¶Ü‡¶á‡¶°‡¶ø ‡¶§‡ßà‡¶∞‡¶ø
            return `tx_${currentUserId}_${Date.now()}_${Math.random().toString(36).substring(2, 8)}`;
        }

        // --- ‡ßß. ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ ---
        async function loadUserData() {
            if (!tg.initDataUnsafe.user) {
                userPointsSpan.textContent = "ID ‡¶®‡ßá‡¶á‡•§";
                return;
            }

            currentUserId = tg.initDataUnsafe.user.id;

            try {
                const response = await fetch(`${RENDER_API_BASE_URL}/user-data?id=${currentUserId}`);
                
                if (response.status === 404) {
                    userPointsSpan.textContent = "0";
                    tg.MainButton.setText("‡¶¨‡¶ü‡ßá /start ‡¶ï‡¶∞‡ßÅ‡¶®").show(); 
                    tg.MainButton.onClick(() => tg.close()); 
                    return;
                }

                const data = await response.json();
                
                if (data.success) {
                    userPointsSpan.textContent = data.points.toLocaleString('en-US');
                    tg.MainButton.hide(); 
                } else {
                    userPointsSpan.textContent = "‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø";
                    tg.showAlert("‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø‡•§");
                }
            } catch (error) {
                userPointsSpan.textContent = "‡¶®‡ßá‡¶ü‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶ï ‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø";
                tg.showAlert("‡¶®‡ßá‡¶ü‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶ï ‡¶∏‡¶Ç‡¶Ø‡ßã‡¶ó‡ßá ‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø‡•§");
            }
        }

        // --- ‡ß®. ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶¨‡¶æ‡¶ü‡¶® ‡¶≤‡¶ú‡¶ø‡¶ï (Monetag ‡¶á‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡¶∏‡ßç‡¶ü‡¶ø‡¶∂‡¶ø‡¶Ø‡¶º‡¶æ‡¶≤ ‡¶è‡¶¨‡¶Ç ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶Ü‡¶∞‡ßç‡¶®‡¶ø‡¶Ç) ---
        adButton.onclick = function() {
            if (!currentUserId) {
                return tg.showAlert("‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡ßá ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶¨‡¶ü‡ßá /start ‡¶≤‡¶ø‡¶ñ‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶∏‡ßá‡¶ü‡¶Ü‡¶™ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§");
            }

            if (!showMonetagAd) {
                return tg.showAlert("Monetag SDK ‡¶≤‡ßã‡¶° ‡¶π‡¶§‡ßá ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶• ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§ ‡¶¶‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡ßá ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§");
            }

            adButton.disabled = true;
            adStatusDiv.textContent = "‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá... ‡¶¶‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡ßá ‡¶è‡¶ü‡¶ø ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡¶¨‡ßá‡¶® ‡¶®‡¶æ‡•§";
            
            // Monetag ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã
            showMonetagAd(); 

            // ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶è‡¶ï‡¶ü‡¶ø ‡¶°‡¶ø‡¶≤‡ßá (‡ß´ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°)
            const pointAwardDelay = 5000; 

            setTimeout(async () => {
                adStatusDiv.textContent = "‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶¶‡ßá‡¶ñ‡¶æ ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶® ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§ ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶Ø‡ßã‡¶ó ‡¶π‡¶ö‡ßç‡¶õ‡ßá...";
                
                tg.MainButton.setText("‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶Ø‡ßã‡¶ó ‡¶π‡¶ö‡ßç‡¶õ‡ßá...").showProgress();
                
                const transactionId = generateTransactionId();
                
                try {
                    // ‡¶ï‡ßç‡¶≤‡¶æ‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶•‡ßá‡¶ï‡ßá ‡¶∏‡¶ø‡¶Æ‡ßÅ‡¶≤‡ßá‡¶ü‡ßá‡¶° S2S ‡¶ï‡¶≤‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï ‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡¶ú‡ßá‡¶ï‡¶∂‡¶® ‡¶§‡ßà‡¶∞‡¶ø
                    // ‡¶è‡¶ü‡¶ø ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞‡ßá ‡¶Ø‡¶æ‡¶¨‡ßá ‡¶è‡¶¨‡¶Ç MONETAG_SECRET_KEY ‡¶¶‡¶ø‡¶Ø‡¶º‡ßá ‡¶≠‡ßá‡¶∞‡¶ø‡¶´‡¶æ‡¶á ‡¶π‡¶¨‡ßá
                    const response = await fetch(`${RENDER_API_BASE_URL}/monetag-callback?secret=${MONETAG_SECRET_KEY}`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            user_id: currentUserId,
                            transaction_id: transactionId,
                            status: 'success'
                        })
                    });
                    
                    const data = await response.json();
                    tg.MainButton.hideProgress();

                    if (data.status === 'ok') {
                        tg.showAlert("‚úÖ ‡¶∏‡¶´‡¶≤: ‡ß´ ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶Ø‡ßã‡¶ó ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!");
                        loadUserData();
                    } else if (data.status === 'info') {
                        tg.showAlert(`‚ÑπÔ∏è ‡¶§‡¶•‡ßç‡¶Ø: ${data.message}`);
                    }
                    else {
                        tg.showAlert(`‚ùå ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•: ${data.message}`);
                    }

                } catch (error) {
                    tg.MainButton.hideProgress();
                    tg.showAlert("‡¶®‡ßá‡¶ü‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶ï ‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø‡•§ ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø‡•§");
                }
                
                adStatusDiv.textContent = "‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶¶‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§...";
                adButton.disabled = false;
                tg.MainButton.hide();

            }, pointAwardDelay);

        };

        // --- ‡ß©. ‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞ ‡¶´‡¶∞‡ßç‡¶Æ ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü ‡¶≤‡¶ú‡¶ø‡¶ï ---
        withdrawForm.onsubmit = async function(e) {
            e.preventDefault();
            
            const points = parseInt(document.getElementById('points').value);
            const paymentAddress = document.getElementById('paymentAddress').value.trim();

            if (!currentUserId) {
                 return tg.showAlert("‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡ßá ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶¨‡¶ü‡ßá /start ‡¶≤‡¶ø‡¶ñ‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶∏‡ßá‡¶ü‡¶Ü‡¶™ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§");
            }
            if (points < 10000 || points > 100000) {
                return tg.showAlert("‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞ ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶Ö‡¶¨‡¶∂‡ßç‡¶Ø‡¶á 10,000 ‡¶•‡ßá‡¶ï‡ßá 100,000 ‡¶è‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶π‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§");
            }
            if (paymentAddress.length < 10) {
                 return tg.showAlert("‡¶∏‡¶†‡¶ø‡¶ï ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶¶‡¶ø‡¶®‡•§");
            }

            messageDiv.textContent = "‡¶∞‡¶ø‡¶ï‡ßã‡¶Ø‡¶º‡ßá‡¶∏‡ßç‡¶ü ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡¶ö‡ßç‡¶õ‡ßá...";
            tg.MainButton.setText("‡¶™‡ßç‡¶∞‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶ï‡¶∞‡¶£ ‡¶ö‡¶≤‡¶õ‡ßá...").showProgress();

            try {
                const response = await fetch(`${RENDER_API_BASE_URL}/withdraw`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        telegramId: currentUserId,
                        points: points,
                        paymentAddress: paymentAddress
                    })
                });

                const data = await response.json();
                tg.MainButton.hideProgress();

                if (response.ok) { 
                    messageDiv.style.color = 'green';
                    tg.showAlert(`‚úÖ ‡¶∏‡¶´‡¶≤: ${data.message}`);
                    loadUserData(); // ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
                } else {
                    messageDiv.style.color = 'red';
                    tg.showAlert(`‚ùå ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•: ${data.message}`);
                }
                messageDiv.textContent = data.message;
                
            } catch (error) {
                tg.MainButton.hideProgress();
                messageDiv.style.color = 'red';
                messageDiv.textContent = "‡¶®‡ßá‡¶ü‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶ï ‡¶∏‡¶Ç‡¶Ø‡ßã‡¶ó‡ßá ‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø‡•§ ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶® Render ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞ ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶Ü‡¶õ‡ßá‡•§";
            }
            tg.MainButton.hide();
        };

        // Mini App ‡¶≤‡ßã‡¶° ‡¶π‡¶≤‡ßá ‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®
        loadUserData();

        // ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶á‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡¶´‡ßá‡¶∏‡ßá‡¶∞ ‡¶∞‡¶ô ‡¶•‡¶ø‡¶Æ‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶Æ‡¶ø‡¶≤‡¶ø‡¶Ø‡¶º‡ßá ‡¶®‡ßá‡¶ì‡¶Ø‡¶º‡¶æ
        document.body.style.backgroundColor = tg.themeParams.bg_color;
        
    </script>
</body>
</html>

